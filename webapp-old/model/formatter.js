/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","cross/fnd/fiori/inbox/util/Utils","cross/fnd/fiori/inbox/util/ProcessLogConfig","cross/fnd/fiori/inbox/model/FormatterHelper"],function(U,D,N,a,P,F){"use strict";var p;return{initials:function(v){if(!v||!a.isString(v)){return"";}var n=v.split(" ");var i=n[0].substring(0,1).toUpperCase();if(n.length>1){i+=n[n.length-1].substring(0,1).toUpperCase();}return i;},priorityState:function(v){if(!v||!a.isString(v)){return"Default";}else if(v.toUpperCase()==="VERY_HIGH"){return"Negative";}else if(v.toUpperCase()==="HIGH"){return"Critical";}else if(v.toUpperCase()==="LOW"){return"Default";}else{return"Default";}},priorityStateOnDetail:function(v){if(!v||!a.isString(v)){return"None";}else if(v.toUpperCase()==="VERY_HIGH"){return"Error";}else if(v.toUpperCase()==="HIGH"){return"Warning";}else if(v.toUpperCase()==="LOW"){return"Success";}else{return"None";}},priorityIcon:function(v){if(!v||!a.isString(v)){return null;}else if(v.toUpperCase()==="VERY_HIGH"){return"sap-icon://arrow-top";}else if(v.toUpperCase()==="HIGH"){return"sap-icon://trend-up";}else if(v.toUpperCase()==="LOW"){return"sap-icon://arrow-bottom";}else{return null;}},priorityText:function(v){var r=this.getView().getController().getResourceBundle();if(!v||!a.isString(v)){return"";}else if(v.toUpperCase()==="VERY_HIGH"){return r.getText("Tooltip_VeryHighPriority");}else if(v.toUpperCase()==="HIGH"){return r.getText("Tooltip_HighPriority");}else if(v.toUpperCase()==="LOW"){return r.getText("Tooltip_LowPriority");}else{return r.getText("Tooltip_MediumPriority");}},formatPriorityForGrouping:function(i,v){var r=v.getController().getResourceBundle();if(i){if(i<=2){return[r.getText("GroupTitle_VeryHighPriority"),"VERY_HIGH"];}else if(i===3||i===4){return[r.getText("GroupTitle_HighPriority"),"HIGH"];}else if(i===5){return[r.getText("GroupTitle_MediumPriority"),"MEDIUM"];}else{return[r.getText("GroupTitle_LowPriority"),"LOW"];}}else{return[r.getText("GroupTitle_NoPriority"),"NoPriority"];}},formatDate:function(d){if(!d||!(d instanceof Date)){return"";}var f={style:"medium"};var l=sap.ui.getCore().getConfiguration().getLocale();var o=(l)?D.getDateInstance(f,l):D.getDateInstance(f);var s=o.format(d,false);return s;},dueState:function(d){var o=new Date();if(d&&d instanceof Date&&d-o<0){return"Error";}else{return"None";}},formatStatus:function(v){var r=this.getView().getController().getResourceBundle();if(!v||!a.isString(v)){return"";}else if(v.toUpperCase()==="READY"){return r.getText("TableColumnCellValue_StatusReadyAsOpen");}else if(v.toUpperCase()==="RESERVED"){return r.getText("TableColumnCellValue_StatusReserved");}else if(v.toUpperCase()==="IN_PROGRESS"){return r.getText("TableColumnCellValue_StatusInProgress");}else if(v.toUpperCase()==="EXECUTED"){return r.getText("TableColumnCellValue_StatusExecuted");}else{return v;}},formatHighlitByStatus:function(v){if(v.toUpperCase()==="RESERVED"){return"Information";}else{return"None";}},formatStatusForGrouping:function(s,v){var r=v.getController().getResourceBundle();if(s){if(!s||!a.isString(s)){return"";}else if(s.toUpperCase()==="READY"){return r.getText("GroupTitle_StatusReadyAsOpen");}else if(s.toUpperCase()==="RESERVED"){return r.getText("GroupTitle_StatusReserved");}else if(s.toUpperCase()==="IN_PROGRESS"){return r.getText("GroupTitle_StatusInProgress");}else if(s.toUpperCase()==="EXECUTED"){return r.getText("GroupTitle_StatusExecuted");}}return s;},showDisplayName:function(v){var d=this.oView.getController().OriginsToDisplayNameDictionary;return d[v];},enterExitFullScreenButtonsVisibility:function(b,v){return!b&&v!==null;},descriptionHtml:function(d){var s="";if(d){if(d.DescriptionAsHtml){s=d.DescriptionAsHtml;}else if(d.Description){s=d.Description;}}if(s){var f=s.replace(/<a /g,"<a target=\"_blank\" rel=\"noreferrer noopener\"");s="<div class=\"sapMText\">"+f+"</div>";}return s;},formatterWorkflowLogStatusIcon:function(s,r){var S;S=this.formatter._getWorkflowLogStatusName(s);if(r){if(r.toUpperCase()==="NEGATIVE"){S="REJECTED";}else if(r.toUpperCase()==="POSITIVE"){S="APPROVED";}}if(!p){p=P.getProcessLogConfig();}return p[S]&&p[S].icon;},_getWorkflowLogStatusName:function(s){var S;switch(s){case"READY":S="WORKFLOW_TASK_CREATED";break;case"IN_PROGRESS":S="WORKFLOW_TASK_IN_PROGRESS";break;case"COMPLETED":S="WORKFLOW_TASK_COMPLETED";break;case"WORKFLOW_STARTED":S=s;break;case"FOR_RESUBMISSION":S="WORKFLOW_TASK_SUSPENDEDED";break;case"CANCELLED":S="WORKFLOW_TASK_CANCELED";break;default:}return S;},formatterWorkflowLogUsername:function(n,s){var S=this.formatter._getWorkflowLogStatusName(s);if(p[S]&&p[S].showUsername){return n;}return"";},formatterWorkflowLogStatusText:function(s,u){if(!p){p=P.getProcessLogConfig();}var S;if(u){S=this.formatter._getWorkflowLogStatusName(s);}else{S=this.formatter._getImpersonalWorkflowLogStatusName(s);}return this.getModel("i18n").getProperty(S);},_getImpersonalWorkflowLogStatusName:function(s){var S;switch(s){case"READY":S="IMPERSONAL_WORKFLOW_TASK_CREATED";break;case"IN_PROGRESS":S="IMPERSONAL_WORKFLOW_TASK_IN_PROGRESS";break;case"COMPLETED":S="IMPERSONAL_WORKFLOW_TASK_COMPLETED";break;case"WORKFLOW_STARTED":S="IMPERSONAL_WORKFLOW_STARTED";break;case"FOR_RESUBMISSION":S="IMPERSONAL_WORKFLOW_TASK_SUSPENDEDED";break;case"CANCELLED":S="IMPERSONAL_WORKFLOW_TASK_CANCELED";break;default:}return S;},formatterWorkflowLogResultState:function(r){switch(r.toUpperCase()){case"POSITIVE":return sap.ui.core.ValueState.Success;case"NEGATIVE":return sap.ui.core.ValueState.Error;case"NEUTRAL":return sap.ui.core.ValueState.None;default:return sap.ui.core.ValueState.None;}},getCustomAttributeTypeWorklistFormatter:function(t,v,f){var b=this;return function c(V){return b.customAttributeTypeFormatter(V,t,f,v);};},customAttributeTypeFormatter:function(v,t,f,V){var i;t=F.normalizeCustomAttributeType(t);var n=N.getInstance();var o=N.getFloatInstance();V=V||this;var b=V.getModel("i18n");var c;switch(t){case"Edm.String":{if(f&&f==="DURATION"){i=F.formatDuration(v,b);break;}i=v;break;}case"Edm.Date":case"Edm.DateTime":{if(typeof v==="undefined"||v===null||v===""){i=v;break;}else{c=F.fnTimeParser(v);if(isNaN(c)){i="Invalid Date";}else{var d=D.getDateInstance();i=d.format(new Date(c));}}break;}case"Edm.Boolean":{if(v==="true"){i=b.getProperty("CustAttrTrue");}else if(v==="false"){i=b.getProperty("CustAttrFalse");}break;}case"Edm.Int64":case"Edm.Int32":case"Edm.Int16":{i=n.format(v);break;}case"Edm.Time":{if(typeof v==="undefined"||v===null||v===""){i=v;break;}else{c=F.fnDurationParser(v);if(isNaN(c)){i="Invalid Time";}else{var T=D.getTimeInstance();var e=new Date();e.setUTCHours(0,0,0,c);i=T.format(e);}}break;}case"Edm.Single":case"Edm.Double":case"Edm.Decimal":{i=o.format(v);break;}default:{i=v;break;}}return i;}};});
