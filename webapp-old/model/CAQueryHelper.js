/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/model/Sorter","sap/ui/model/FilterProcessor","sap/base/Log"],function(S,F,L){"use strict";return{createSortParams:function(s){var a="";for(var i=0;i<s.length;i++){var o=s[i];if(o instanceof S){a+=o.sPath;a+=o.bDescending?" desc":" asc";a+=",";}else{L.error("Trying to use "+o+" as a Sorter, but it is a "+typeof o);}}a=a.slice(0,-1);return a;},createFilterParams:function(f){var t=this,o=Array.isArray(f)?F.groupFilters(f):f;function c(o,O){if(o.aFilters){return a(o,O);}return t._createFilterSegment(o.sPath,o.sOperator,o.oValue1,o.oValue2);}function a(m,O){var b=m.aFilters,A=!!m.bAnd,s="";if(b.length===0){return A?"true":"false";}if(b.length===1){if(b[0]._bMultiFilter){return c(b[0]);}return c(b[0],true);}if(!O){s+="(";}s+=c(b[0]);for(var i=1;i<b.length;i++){s+=A?" and ":" or ";s+=c(b[i]);}if(!O){s+=")";}return s;}return c(o,true);},_createFilterSegment:function(p,o,v,V){if(v&&(v.indexOf("'")===-1)){v="'"+String(v)+"'";}if(V&&(V.indexOf("'")===-1)){V="'"+String(V)+"'";}switch(o){case"EQ":case"NE":case"GT":case"GE":case"LT":case"LE":return p+" "+o.toLowerCase()+" "+v;case"BT":return"("+p+" ge "+v+" and "+p+" le "+V+")";case"NB":return"not ("+p+" ge "+v+" and "+p+" le "+V+")";case"Contains":return"substringof("+v+","+p+")";case"NotContains":return"not substringof("+v+","+p+")";case"StartsWith":return"startswith("+p+","+v+")";case"NotStartsWith":return"not startswith("+p+","+v+")";case"EndsWith":return"endswith("+p+","+v+")";case"NotEndsWith":return"not endswith("+p+","+v+")";default:L.error("ODataUtils :: Unknown filter operator "+o);return"true";}}};});
