/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/base/util/ObjectPath","sap/ui/base/ManagedObject","sap/ui/model/json/JSONModel","sap/ui/Device","cross/fnd/fiori/inbox/util/tools/ApplicationFacade","cross/fnd/fiori/inbox/util/tools/ApplicationImplementation","cross/fnd/fiori/inbox/util/tools/ConfigurationBase","cross/fnd/fiori/inbox/Component","sap/ui/model/BindingMode"],function(q,M,O,a,J,D,A,b,C,c,B){"use strict";a.extend("cross.fnd.fiori.inbox.util.tools.Application",{metadata:{properties:{identity:"string",oViewHook:"string",component:"object"}},constructor:function(i,s){a.apply(this,arguments);sap.ui.getCore().attachInit(q.proxy(function(){this.main();},this));},createDeviceModel:function(){var d=new J({isTouch:D.support.touch,isNoTouch:!D.support.touch,isPhone:D.system.phone,isNoPhone:!D.system.phone,listMode:(D.system.phone)?"None":"SingleSelectMaster",listItemType:(D.system.phone)?"Active":"Inactive"});d.setDefaultBindingMode(B.OneWay);this.getComponent().setModel(d,"device");},main:function(){var o=new b({identity:this.getIdentity(),oViewHook:this.getOViewHook(),component:this.getComponent()});this.createDeviceModel();cross.fnd.fiori.inbox.util.tools.Application.getImpl=(function(v){return function(){return v;};}(o));var d=new A(o);this.setConfiguration();var e=O.get(this.getIdentity()+".Configuration");var f=new e();f._setApplicationFacade(d);if(o.isMock()){var m="Running in demo mode with mock data";M.show(m,{duration:1000});}o.startApplication(f);},setConfiguration:function(){C.extend("cross.fnd.fiori.inbox.Configuration",{oServiceParams:{serviceList:[{name:"TASKPROCESSING",masterCollection:"TaskCollection",serviceUrl:(function(){var t="";var s=cross.fnd.fiori.inbox.util.tools.Application.getImpl().getComponent().getComponentData();if(s&&s.startupParameters&&s.startupParameters.tcmURL){t=s.startupParameters.tcmURL[0];}if(t){if(-1<sap.ui.require.toUrl("cross/fnd/fiori/inbox").indexOf(".crossfndfioriinbox")){return sap.ui.require.toUrl("cross/fnd/fiori/inbox")+t;}else{return t;}}else{return c.getMetadata().getManifestEntry("sap.app").dataSources["TASKPROCESSING"].uri;}})(),isDefault:true,mockedDataSource:sap.ui.require.toUrl("cross/fnd/fiori/inbox")+"/"+c.getMetadata().getManifestEntry("sap.app").dataSources["TASKPROCESSING"].settings.localUri,useBatch:true,useV2ODataModel:true,noBusyIndicator:true,fRequestFailed:function(e){var o=cross.fnd.fiori.inbox.util.tools.Application.getImpl().getComponent();o.getDataManager().handleRequestFailed(e);}},{name:"POSTACTION",masterCollection:"TaskCollection",serviceUrl:(function(){var t="";var s=cross.fnd.fiori.inbox.util.tools.Application.getImpl().getComponent().getComponentData();if(s&&s.startupParameters&&s.startupParameters.tcmURL){t=s.startupParameters.tcmURL[0];}if(t){if(-1<sap.ui.require.toUrl("cross/fnd/fiori/inbox").indexOf(".crossfndfioriinbox")){return sap.ui.require.toUrl("cross/fnd/fiori/inbox")+t;}else{return t;}}else{return c.getMetadata().getManifestEntry("sap.app").dataSources["TASKPROCESSING"].uri;}})(),isDefault:false,useBatch:true,useV2ODataModel:true,noBusyIndicator:true,fRequestFailed:function(e){var o=cross.fnd.fiori.inbox.util.tools.Application.getImpl().getComponent();o.getDataManager().handleRequestFailed(e);}}]},getServiceParams:function(){return this.oServiceParams;},getServiceList:function(){return this.oServiceParams.serviceList;},isUsingStableIds:function(){return true;},getMasterKeyAttributes:function(){return["Id"];}});}});return cross.fnd.fiori.inbox.util.tools.Application;});
