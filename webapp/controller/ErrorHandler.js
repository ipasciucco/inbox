/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox","cross/fnd/fiori/inbox/util/Utils"],function(U,M,a){"use strict";return U.extend("cross.fnd.fiori.inbox.controller.ErrorHandler",{bIsMetadataLoadedFailed:null,constructor:function(c){this._oResourceBundle=c.getModel("i18n").getResourceBundle();this._oComponent=c;this._oModel=c.getModel();this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText("errorText");this._oModel.attachMetadataFailed(function(e){this.setIsMetadataLoadedFailed(true);var p=e.getParameters();this._showServiceError(p.response);},this);this._oModel.attachRequestFailed(function(e){var p=e.getParameters();this._showServiceError(p.response);},this);},_showServiceError:function(d){if(this._bMessageOpen){return;}this._bMessageOpen=true;var h=a.fnRemoveHtmlTags(d);M.error(this._sErrorText,{details:h,styleClass:this._oComponent.getContentDensityClass(),actions:[M.Action.CLOSE],onClose:function(){this._bMessageOpen=false;}.bind(this)});},preventErrorMessageBoxToOpen:function(m){this._bMessageOpen=m;},getIsMetadataLoadedFailed:function(){return this.bIsMetadataLoadedFailed;},setIsMetadataLoadedFailed:function(i){this.bIsMetadataLoadedFailed=i;}});});
