/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["cross/fnd/fiori/inbox/controller/BaseController","cross/fnd/fiori/inbox/model/formatter","sap/ui/model/json/JSONModel","sap/ui/Device","cross/fnd/fiori/inbox/model/models"],function(B,f,J,D,m){"use strict";return B.extend("cross.fnd.fiori.inbox.controller.DetailDetail",{formatter:f,onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("myTasksDetailDetail").attachPatternMatched(this._onDetailDetailMatched,this);m.attachEvent("workflowLogModelUpdated",null,function(){this.getModel("parametersModel").setProperty("/workflowLogNoDataText",this.getResourceBundle().getText("DetailDetail_WokrflowLogNoDataText"));this.setModel(m.getWorkflowLogModel(),"workflowLogModel");this.getModel("parametersModel").setProperty("/busyIndicatorWorkflowLog",false);},this);m.attachEvent("workflowLogModelUpdateError",null,function(){this.getModel("parametersModel").setProperty("/workflowLogNoDataText",this.getResourceBundle().getText("DetailDetail_WokrflowLogNoDataText"));this.setModel(m.getWorkflowLogModel(),"workflowLogModel");this.getModel("parametersModel").setProperty("/busyIndicatorWorkflowLog",false);},this);},onExit:function(){this.getRouter().detachRoutePatternMatched(this._onDetailDetailMatched,this);},handleFullScreen:function(){var n=this.getModel("fcl").getProperty("/actionButtonsInfo/endColumn/fullScreen");var l=n;this.oRouter.navTo("myTasksDetailDetail",{SAP__Origin:encodeURIComponent(this.SAP__Origin),InstanceID:encodeURIComponent(this.InstanceID),layout:l},this.bReplaceHistory);},handleExitFullScreen:function(){var n=this.getModel("fcl").getProperty("/actionButtonsInfo/endColumn/exitFullScreen");var l=n;this.oRouter.navTo("myTasksDetailDetail",{SAP__Origin:encodeURIComponent(this.SAP__Origin),InstanceID:encodeURIComponent(this.InstanceID),layout:l},this.bReplaceHistory);},handleClose:function(){this.getModel("parametersModel").setProperty("/showLogButtonPressed",false);m.resetWorkflowLogModel();var n=this.getModel("fcl").getProperty("/actionButtonsInfo/endColumn/closeColumn");var l=n;this.oRouter.navTo("myTasksDetail",{SAP__Origin:encodeURIComponent(this.SAP__Origin),InstanceID:encodeURIComponent(this.InstanceID),layout:l},this.bReplaceHistory);},_onDetailDetailMatched:function(e){var a=e.getParameter("arguments");if(!this.getModel("parametersModel").getProperty("/workflowLogUserPictureUrl")){this.getModel("parametersModel").setProperty("/workflowLogUserPictureUrl",sap.ui.require.toUrl("cross/fnd/fiori/inbox/img/placeholder.jpg"));}if(!m.getWorkflowLogModel().getProperty("/modelUpdated")){this.getModel("parametersModel").setProperty("/busyIndicatorWorkflowLog",true);this.getModel("parametersModel").setProperty("/workflowLogNoDataText"," ");this.setModel(m.getWorkflowLogModel(),"workflowLogModel");m.refreshWorkflowLogModel(a.InstanceID,a.SAP__Origin);}this.SAP__Origin=decodeURIComponent(a.SAP__Origin);this.InstanceID=decodeURIComponent(a.InstanceID);this.bReplaceHistory=!D.system.phone;}});},true);
