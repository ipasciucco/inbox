/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/base/DataType","sap/m/Column","sap/m/Text"],function(B,D,C,T){"use strict";return B.extend("cross.fnd.fiori.inbox.util.MultiSelectCustomAttributeHelper",{constructor:function(c,v,t,s){this._oController=c;this._oView=v;this._oTable=t;this._customColumns={};this._oSorting=s;},addColumn:function(c){var i=["customcreatedbyname","customtasktitle"];if(i.indexOf(c.Name.toLowerCase())===-1){var a=this._customColumns[c.Name];if(!a){a=this._getCustomAttributeColumn(c);this._customColumns[c.Name]=a;}this._oTable.addColumn(a.column);var t=this._oTable.getBindingInfo("items").template;t.addCell(a.cell);return a;}else{return null;}},hideCustomAttributeColumns:function(){var t=this._oTable.getBindingInfo("items").template;for(var k in this._customColumns){var c=this._customColumns[k];this._oTable.removeColumn(c.column);t.removeCell(c.cell);c.column.destroy();c.cell.destroy();}this._customColumns={};},_getCustomAttributeColumn:function(c){var i=this._genSafeId(c,true);var o=new C(i+"Column",{header:new T(i+"Lbl",{text:c.Label}),});var a=new T(i+"Txt",{text:"{parts:[{path:'multiSelectSummaryModel>"+encodeURIComponent(c.Name)+"'}], formatter:'cross.fnd.fiori.inbox.Conversions.fnCustomAttributeFormatter'}"});a.data({Type:c.Type});this._oSorting.addCustomSortItem(i,c.Name,c.Label);return{cell:a,column:o};},_genSafeId:function(c,b,a,A){var d=a?a:"AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789_-.:";var e=(decodeURIComponent(c.TaskDefinitionID)+c.Name).replace(/\//g,"");var t=D.getType("sap.ui.core.ID");if(!t.isValid(e)){for(var i=0;i<e.length;i++){if(d.indexOf(e[i])<0){e=e.replace(new RegExp(e[i],"g"),e[i].charCodeAt(0));}}if((e.length>0)&&b){var f=A?A:"_AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz";if(f.indexOf(e[0])<0){e="a"+e;}}}return e;},});});
