/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["cross/fnd/fiori/inbox/controller/BaseController","sap/base/Log"],function(B,L){"use strict";return B.extend("cross.fnd.fiori.inbox.view.ReplaceDetail",{onInit:function(){var m=this.getOwnerComponent();m.getRouter().attachRoutePatternMatched(this.fnHandleNavToTaskUIDetail,this);m.getDataManager().fnShowReleaseLoader(false);},fnHandleNavToTaskUIDetail:function(e){if(e.getParameter("name")==="replace_detail"||e.getParameter("name")==="replace_detail_deep"){this.oEventParameters=e.getParameters().arguments;this.oDataManager=this.getOwnerComponent().getDataManager();this.fnCreateIntentBasedComponent();}},fnCreateIntentBasedComponent:function(){var i=this.getOwnerComponent().getModel("intentModel");var I=i?i.getData():null;if(!I){this.getOwnerComponent().getRouter().navTo("detail",{SAP__Origin:this.oEventParameters.SAP__Origin,InstanceID:this.oEventParameters.InstanceID,contextPath:this.oEventParameters.contextPath},true);return;}var t=this;this.fnDestroyIntentBasedComponent();var n=sap.ushell.Container.getService("CrossApplicationNavigation");var c={onTaskUpdate:jQuery.proxy(t.fnDelegateTaskRefresh,t)};var p=I.params?"?"+t.fnCreateURLParameters(I.params):"";var s=I.params.openMode?I.NavigationIntent+p:I.NavigationIntent;n.createComponentInstance(s,{componentData:c},t.getOwnerComponent()).done(function(C){t.byId("appContent").setComponent(C);}).fail(function(e){L.error(e);});},fnCreateURLParameters:function(d){return Object.keys(d).map(function(k){return[k,d[k]].map(encodeURIComponent).join("=");}).join("&");},fnDelegateTaskRefresh:function(){var n=this.oEventParameters;var s=n.SAP__Origin;var i=n.InstanceID;if(n&&s&&i){this.oDataManager.fnUpdateSingleTask(s,i);}},fnDestroyIntentBasedComponent:function(){var i=this.byId("appContent").getComponentInstance();if(i){i.destroy();}}});});
