/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/core/library","cross/fnd/fiori/inbox/util/ConfirmationDialogManager","cross/fnd/fiori/inbox/util/EmployeeCard","cross/fnd/fiori/inbox/util/tools/Application"],function(C,D,l,a,E,A){"use strict";var V=l.ValueState;return C.extend("cross.fnd.fiori.inbox.view.ForwardSimple",{_FORWARD_DIALOG_ID:"DLG_FORWARD_SIMPLE",_FORWARDER_ITEM_ID:"ITM_AGENT",_TARGET_USER:"IFD_TARGET_USER",_NOTE:"confirmDialogTextarea",fnForward:null,onInit:function(){this.getView().setModel(cross.fnd.fiori.inbox.util.tools.Application.getImpl().AppI18nModel,"i18n");if(D.system.phone){var d=this.getView().byId(this._FORWARD_DIALOG_ID);d.setStretch(true);}},onCancel:function(){var f=this.getView().byId(this._FORWARD_DIALOG_ID);f.close();},onForward:function(){var f=this.getView().byId(this._FORWARD_DIALOG_ID);var d=f.getModel();if(d){this.fnForward=d.getProperty("/closeDlg");}var F=this.getView().byId(this._TARGET_USER);var u=F.getValue();if(!u||u===""){F.setValueState(V.Error);var e=cross.fnd.fiori.inbox.util.tools.Application.getImpl().getComponent().oDataManager.oi18nResourceBundle.getText("XMSG_FORWARD_USER_ID_MANDATORY");F.setValueStateText(e);F.focus();return;}else{F.setValueState(V.None);F.setValueStateText("");}var o=this.getView().byId(this._NOTE);var n=o.getValue();this.getView().byId(this._FORWARD_DIALOG_ID).close();var b={UniqueName:u,DisplayName:u};var N={bConfirmed:true,sNote:n,oAgentToBeForwarded:b};this.fnForward(N);},onBeforeOpenDialog:function(){var f=this.getView().byId(this._TARGET_USER);var F=this.getView().byId(this._FORWARD_DIALOG_ID);F.setInitialFocus(f);f.setValue("");f.setValueState(V.None);f.setValueStateText("");var o=this.getView().byId(this._NOTE);o.setValue("");this.fnForward=null;var d=F.getModel();if(d){this.fnForward=d.getProperty("/closeDlg");}}});});
